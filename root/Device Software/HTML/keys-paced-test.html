<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>
	<head>
		<title>Paced Keyboard Test</title>
		<link rel="stylesheet" type="text/css" href="_style.css" />	
		
		<script language="javascript" src="constants.js"></script>
		<script language="javascript">
		
		var Kinetics = parent.frames["scriptframe"].Kinetics;
						
			
		parent.frames["scriptframe"].currentTest = "KEYBOARD";
		
		var countRight = 0;
		var countLeft = 0;

		function init()
		{
			Kinetics.SetLedState(4,0);
			Kinetics.SetLedState(5,0);
			Kinetics.SetLedState(6,0);
			
			readyRight();
		}

		function resetActivityTimer()
		{
			// do nothing here in the event a capsit button is pressed	
		}
		
			
		// prepare for right hand
		function readyRight()
		{
            thisCount = countRight + 1;
            header.innerText = "Paced Keyboard Test - Trial " + thisCount + " of 3";
            panel.style.top = 90;
//            panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Right Hand<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get Ready";
            panel.style.paddingTop = 0;
            panel.innerHTML = "&nbsp;&nbsp;&nbsp;Most Affected<br>Hand<br>&nbsp;Get Ready";
            Kinetics.ActivityConfig(6, "KEYPACER" + countRight, 0, 0);
            parent.frames["scriptframe"].KineticsAudioPlay(
                "\\hard disk\\audio\\keyboard\\keyboard-paced-test.wav");
        
            setTimeout('startRight()',4800);
		}

//		// prepare for left hand
//		function readyLeft()
//		{
//            header.innerText = "Keyboard Test - Left Hand";
//            panel.style.paddingTop = 0;
//            panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close Your<br>&nbsp;&nbsp;&nbsp;&nbsp;Eyes Again";
//            parent.frames["scriptframe"].KineticsAudioPlay(
//                "\\hard disk\\audio\\keyboard\\repeat_left_begin_at_beep_get_ready.wav");
//            setTimeout('readyLeft2()',4000);
//		}
//		
//		function readyLeft2()
//		{
//            panel.style.paddingTop = 0;
//            panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Left Hand<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get Ready";
//        
//            Kinetics.ActivityConfig(6, "KEYLEFT", 0, 0);
//        
//            setTimeout('startLeft()',3500);
//		}
//				
		// begin test with right hand
		function startRight()
		{
			countRight++;
            panel.style.top = 100;
			panel.style.paddingTop = 12;
			panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style='font-size:28px;color:green;'>GO</font>";

			setTimeout("panel.style.top=80;panel.innerHTML = 'Press the Keys<br>In Time With<br>the Metronome';",4000);
			Kinetics.ActivityStart(0);

			setTimeout('stopRight()',48000);
		}
		
//		// begin test with left hand
//		function startLeft()
//		{
//			countLeft++;
//			panel.style.paddingTop = 12;
//			panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style='font-size:28px;color:green;'>GO</font>";
//			
//			setTimeout("panel.style.paddingTop=0;panel.innerHTML = 'Test In Progress<br>No Peeking!';",2000);
//			Kinetics.ActivityStart(1);
//				
//			setTimeout('stopLeft()',KEY_TIMEOUT);
//		}
		
		// stop right
		function stopRight()
		{		
		    Kinetics.ActivityEndNormal();  
		  					
//			Kinetics.ActivityBeep();

//			parent.frames["scriptframe"].KineticsAudioPlay(
//				"\\hard disk\\audio\\stop.wav");	
				
			panel.style.top=100;
			panel.style.paddingTop=12;
			panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style='font-size:28px;color:maroon;'>STOP</font>";	

            if (countRight < 3) {
				setTimeout('readyRight()', 4000);
			}
			else {
				setTimeout('endTest();', 2000);
			}
//			setTimeout('readyLeft()',2000);	
		}
		
		// stop left
		function stopLeft()
		{                        
            Kinetics.ActivityEndNormal();  
                            
            Kinetics.ActivityBeep();						
			
			parent.frames["scriptframe"].KineticsAudioPlay(
				"\\hard disk\\audio\\stop.wav");	
					
			panel.style.paddingTop=12;
			panel.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style='font-size:28px;color:maroon;'>STOP</font>";	
					
			setTimeout('endTest();',1000); 	
		}
				
		// after three rounds
		function endTest()
		{
			header.innerText = "Paced Keyboard Test - Complete";
			
			panel.innerHTML = "";
			
//			var el = document.getElementById("sessionDone");
//			el.innerHTML = "You may open your<br>&nbsp;&nbsp;eyes and remove<br>&nbsp;&nbsp;&nbsp;&nbsp;the ear muffs";
			
			parent.frames["scriptframe"].currentTest = "";
			
//			parent.frames["scriptframe"].KineticsAudioPlay("\\hard disk\\audio\\misc\\ears_eyes_complete.wav");    
			
//			setTimeout("location='foot-intro.html';",4000);
			
            setTimeout("location='session-saving.html';",2000);
		}
		
		// return to home screen for now (temporary for demo purposes)
		function keyDownLocal()
		{
			parent.frames["scriptframe"].resetActivityTimer();
			// m key (menu)
			if (event.keyCode == 77)
			{
				parent.frames["scriptframe"].Kinetics.CancelAudioPlay(); 		
				window.location = "debug-menu.html";
			}
		}

	</script>
				
	</head>
	<body class="hands" onload="init();focus();" onkeydown="keyDownLocal();">
		<div id="device" class="device">
			<img src="images/device.gif">
		</div>
		<div id="header" class="header">
			Keyboard Test
		</div>
		<div id="bluebg" style="position: absolute; left: 0; top:0;">
			<img src="images/halfblue.gif">
		</div>
		<div id="boundingboxtest" class="boundingboxtest" style="top:85">
			<table border="0" cellpadding="0" cellspacing="0">
				<tr>
				<td><img src="images/boundingbox-topleft.gif"></td>
				<td width="100" height="14" background="images/boundingbox-top.gif"></td>
				<td><img src="images/boundingbox-topright.gif"></td>
				</tr>
				<tr>
				<td height="60" background="images/boundingbox-left.gif"></td>
				<td background="images/boundingbox-bg.gif"></td>
				<td height="60" background="images/boundingbox-right.gif"></td>
				</tr>
				<tr>
				<td><img src="images/boundingbox-bottomleft.gif"></td>
				<td width="100" height="14" background="images/boundingbox-bottom.gif"></td>
				<td><img src="images/boundingbox-bottomright.gif"></td>
				</tr>
			</table>
		</div>
		<div id="panel" class="inprogress">
			
		</div>
        <div id="panel2" class="inprogress2" style="position:absolute;left:80;top:100;color: #234368; ;font-size:13pt;">
        </div>
		<div id="sessionDone" style="position:absolute;left:100;top:100;font-color:black;font-size:12pt;">
        </div>
	</body>
</html>
